[{"content":"最近在学《Python Crash Course》，可能是版本的原因，抄作业经常会出错，网上找了下解决办法。\nError\u0026ndash;requests.exceptions.ProxyError【17.1.4　处理API响应】 调用API一直报错，请求异常，代理错误。 参考:令人不悦的Error\u0026ndash;requests.exceptions.ProxyError python_repos.py修改：\n1 2 3 4  # 执行API调用并存储响应 url = \u0026#39;https://api.github.com/search/repositories?q=language:python\u0026amp;sort=stars\u0026#39; r = requests.get(url) print(\u0026#34;Status code:\u0026#34;, r.status_code)   为：\n1 2 3 4 5 6  # 执行API调用并存储响应 url = \u0026#39;https://api.github.com/search/repositories?q=language:python\u0026amp;sort=stars\u0026#39; # 绕过系统代理 proxies = { \u0026#34;http\u0026#34;: None, \u0026#34;https\u0026#34;: None} r = requests.get(url, proxies=proxies) print(\u0026#34;Status code:\u0026#34;, r.status_code)   无法加载文件Scripts\\Activate.ps1【18.1.4　激活虚拟环境】 ll_env\\Scripts\\activate一直激活不了虚拟环境，报错无法加载文件。 参考：Win10 VS Code pipenv无法加载文件Scripts\\Activate.ps1 我是直接在VS自带的终端输入Set-ExecutionPolicy -Scope CurrentUser RemoteSigned回车，然后就好了。\nError: Requested setting INSTALLED_APPS, but settings are not configured【18.1.6　在Django中创建项目】 新建项目django-admin.py startproject learning_log .报错。 参考：Python [解决方法] error: Requested setting INSTALLED_APPS, but settings are not configured 修改：\n1  django-admin.py startproject learning_log .   为：\n1  django-admin startproject learning_log .   TypeError: init() missing 1 required positional argument: ‘on_delete‘【18.2.5　迁移模型Entry】 python manage.py makemigrations learning_logs出错，显示TypeError: __init__() missing 1 required positional argument: ‘on_delete‘。\n参考：【异常】TypeError: init() missing 1 required positional argument: ‘on_delete‘，在【18.2.4　定义模型Entry】models.py定义外键时加上位参on_delete。 修改：\n1 2 3  class Entry(models.Model): \u0026#34;\u0026#34;\u0026#34;学到的有关某个主题的具体知识\u0026#34;\u0026#34;\u0026#34; topic = models.ForeignKey(Topic)   为：\n1 2 3  class Entry(models.Model): \u0026#34;\u0026#34;\u0026#34;学到的有关某个主题的具体知识\u0026#34;\u0026#34;\u0026#34; topic = models.ForeignKey(Topic, on_delete=models.CASCADE)   ","date":"2022-04-18T08:52:10+08:00","image":"https://www.darkbluesoul.cc/p/python-crash-course%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/python-course_hu1ee077f0593e3ce38337d022afc8cac0_71395_120x120_fill_q75_box_smart1.jpg","permalink":"https://www.darkbluesoul.cc/p/python-crash-course%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","title":"Python Crash Course学习笔记"},{"content":"企业微信里写了个小程序，对学生的积分进行管理，前段时间无聊想着弄个排名吧，因为平时也有扣分，那些平时表现好的犯错跟其他成员扣分一样扣，总觉得亏了点，于是就抄王者荣耀搞了奖分等级，等级高点的扣分的时候就打个折。懒得改小程序，就每个月导出数据库统计一次，扣分打折根据统计出来的排名折扣口算输入。新学期，想着长痛不如短痛，还是直接做在小程序里好了。\n云数据库新建rank集合 字段一开始只有name，reward，graduate三个个字段，后来发现坑了，哪怕数据权限改成“所有用户可读，仅创建者可读写”也无法修改数据，只好再加了个_openid字段，值全部是我自己的openid，然后才正常了，也就是加了openid我才有权限修改，这里折腾了很久，一直以为是自己逻辑弄错了。\npages/admin/admin.js\t//奖惩处理 数据库初始化 1 2 3  // score集合保存所有学生的奖惩记录 const score = db.collection(\u0026#39;score\u0026#39;); const rankCollection = db.collection(\u0026#39;rank\u0026#39;);   输入姓名从rank集合读取排名计算扣分时的折扣rate 这里我傻了点，我是用for循环找有序数组里对应用户的排名的，其实直接在取好的数组里添加一个顺序字段index，后面直接读取index就可以了。\n1 2 3 4  // 从rank集合按降序提取前10名未毕业的同学 const rank10 = db.collection(\u0026#39;rank\u0026#39;).where({ graduate: 0 }).limit(10).orderBy(\u0026#39;reward\u0026#39;, \u0026#39;desc\u0026#39;);   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24  // 奖惩时输入姓名查找前十名次，计算折扣  inputName(event) { nowname = event.detail rank10.get({ success: res =\u0026gt; { this.setData({ rate: 1 }) for (let i = 0; i \u0026lt; 10; i++) { //查找排名  if( res.data[i].name == event.detail){ if (i \u0026lt; 1){var rate = 0.5;} else if (i \u0026lt; 3){var rate = 0.7;} else if(i \u0026lt; 6){var rate = 0.8;} else {var rate = 0.9;} console.log(rate) this.setData({ rate: rate }) break } } } }) },   奖惩操作：负分打折，正分累加 参考小程序调用另一个函数方法中的值调用rate，保存数据时判断分数小于0，则乘以rate。累加那段折腾了很久，一开始用的get.where判断用success箭头函数，但就是要么不生效要么新增数据两倍累加，也不懂，就不停试，直到后来看到JavaScript 错误 - Throw 和 Try to Catch (w3school.com.cn)，试了下，好像可以，想着里面应该是个函数，确实可行，就先这样了。中间还出了个拼写错误，现在就不知道试的过程中还有没有别的方法是可以用的了。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66  // 添加奖惩信息  saveuserinfo() { if (score1 \u0026lt; 0){ //负分处理  var rate = this.data.rate score.add({ //添加折后数据  data: { name: nowname, score: score1*rate, //扣分打折  detail: detail, content: content, time: time } }).then(res =\u0026gt; { console.log(\u0026#39;奖惩成功！\u0026#39;) wx.showToast({ title: \u0026#39;奖惩成功！\u0026#39;, icon: \u0026#39;success\u0026#39;, duration: 3000 }) }) } else{\t//正分处理  score.add({ //添加奖分数据  data: { name: nowname, score: score1, //奖分不打折  detail: detail, content: content, time: time } }).then(res =\u0026gt; { console.log(\u0026#39;奖惩成功！\u0026#39;) wx.showToast({ title: \u0026#39;奖惩成功！\u0026#39;, icon: \u0026#39;success\u0026#39;, duration: 3000 }) }) //加分写入rank集合，if的几种情况不累加，不知道怎么or。。。  if(content == \u0026#34;申请通过\u0026#34;){} else if(content == \u0026#34;申请成功\u0026#34;){} else if(content == \u0026#34;战队排行\u0026#34;){} else if(content == \u0026#34;提交检讨\u0026#34;){} else{ //把加分累加到总奖分里  console.log(nowname,score1) //先添加数据，数据库name唯一索引，已有name会出错，错误时更新reward  rankCollection.add({ data: { graduate: 0,\t//既然有加分那肯定没毕业  name: nowname, reward: score1 } }).catch(function() { console.log(\u0026#39;已有用户数据,更新总奖分\u0026#39;); rankCollection.where({ name: nowname }).update({ data: { reward: _.inc(score1) } }) }) } } } ,   pages/index/index.js\t//首页等级逻辑 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46  // 读取当前用户在前十名中的名次，未匹配则为青铜 console.log(\u0026#39;[获取]user集合用户姓名: \u0026#39;, nowname) rankCollection.where({ //毕业学生全部都是传奇王者  name: nowname }) .get({ success: res =\u0026gt; { if (res.data[0].graduate == 1) {this.setData({ grade: \u0026#34;☆☆☆☆☆传奇王者☆☆☆☆☆\u0026#34; }) console.log(\u0026#39;等级: \u0026#39;, grade) } else { rank10.get({ success: res =\u0026gt; { this.setData({ grade: \u0026#34;★倔强青铜★\u0026#34;\t//在校生默认青铜  }) for (let i = 0; i \u0026lt; 10; i++) { //查找前十名次  if( res.data[i].name == nowname){ if (i \u0026lt; 1){this.setData({ grade: \u0026#34;★★★★★荣耀王者★★★★★\u0026#34; })} else if (i \u0026lt; 3){this.setData({ grade: \u0026#34;★★★★至尊星耀★★★★\u0026#34; })} else if(i \u0026lt; 6){this.setData({ grade: \u0026#34;★★★永恒钻石★★★\u0026#34; })} else {this.setData({ grade: \u0026#34;★★尊贵铂金★★\u0026#34; })} console.log(grade) break } } } }) } }, fail:\t//从来没加过分的同学都是青铜  this.setData({ grade: \u0026#34;★倔强青铜★\u0026#34; }) })   pages/index/index.wxml\t//首页渲染 用了个Vant Weapp的UI组件vantvan-button展示等级，CSS我不知道怎么修改，就只好挑自己喜欢的组件用了。\n1  \u0026lt;van-button type=\u0026#34;warning\u0026#34; size=\u0026#34;large\u0026#34;\u0026gt;{{grade}}\u0026lt;/van-button\u0026gt;   前十名次计算的另一种思路 用for循环增加index名次字段，然后读取名次就好了，做前二十的排行榜的时候网上找的办法。\n按前面的方法，rank20只有名字和总奖分，渲染的页面就是一个ranklist循环：\n1 2 3 4 5 6 7 8 9  \u0026lt;!--pages/rank/rank.wxml--\u0026gt; \u0026lt;block wx:for=\u0026#34;{{ranklist}}\u0026#34; wx:key=\u0026#34;_id\u0026#34;\u0026gt; \u0026lt;van-cell value=\u0026#34;{{item.reward}}\u0026#34; center\u0026gt; \u0026lt;view slot=\u0026#34;title\u0026#34;\u0026gt; \u0026lt;view class=\u0026#34;van-cell-text\u0026#34;\u0026gt;{{item.index}}. {{item.name }}\u0026lt;/view\u0026gt; \u0026lt;van-tag type=\u0026#34;danger\u0026#34;\u0026gt;{{item.grade}}\u0026lt;/van-tag\u0026gt; \u0026lt;/view\u0026gt; \u0026lt;/van-cell\u0026gt; \u0026lt;/block\u0026gt;   不知道怎么在wxml加其他要展示的信息，那就只能在rank.js里想办法了。 pages/rank/rank.js：for循环添加名次index和等级grade字段到ranklist。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  const rank20 = db.collection(\u0026#39;rank\u0026#39;).where({ graduate: 0 }).limit(20).orderBy(\u0026#39;reward\u0026#39;, \u0026#39;desc\u0026#39;); rank20.get() .then(async res =\u0026gt; { var ranklist = res.data // console.log(ranklist)  for (const i in ranklist) { ranklist[i].index = Number(i)+1 if (Number(i) \u0026lt; 1){ranklist[i].grade = \u0026#34;★★★★★荣耀王者★★★★★\u0026#34;} else if (Number(i) \u0026lt; 3){ranklist[i].grade = \u0026#34;★★★★至尊星耀★★★★\u0026#34;} else if(Number(i) \u0026lt; 6){ranklist[i].grade = \u0026#34;★★★永恒钻石★★★\u0026#34;} else if(Number(i) \u0026lt; 10){ranklist[i].grade = \u0026#34;★★尊贵铂金★★\u0026#34;} else{ranklist[i].grade = \u0026#34;★倔强青铜★\u0026#34;} } // console.log(ranklist)  this.setData({ ranklist: ranklist }) })   结语 开学一个礼拜就干了这个，换成懂的人，估计几分钟就解决了吧，那几天脑子里都在想为什么写的跟实现的不一样，怎么才能解决，然后就是各种搜索。官方文档确实很有用，有些问题就是直接抄的官方文档里的代码稍微改改就可以了。\n挺好的，实现了自己想要的功能，很有成就感。\n","date":"2022-03-02T16:09:30+08:00","permalink":"https://www.darkbluesoul.cc/p/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%A7%AF%E5%88%86%E6%8E%92%E8%A1%8C/","title":"小程序积分排行"},{"content":"删除mailchimp mailchimp原来的账号想不起来了，暂时懒得弄，不知道用邮件订阅的多不多？ _config.yml里面mailchimp注释掉好像也有显示的，有点忘了，不喜欢，就直接把newsletter.html整个注释掉了，就不显示了。\n修改Disqus为来必力 国内访问disqus实在太慢了，改成来必力好像还行，不过也不是很快,先用着吧。 打开_includes/disqus.html，找到\n1  {% if site.discus_identifier %}   这个是判断config有没有填写disqus帐号的，有就显示评论，没有就不显示，我把这条删了;\n找到\n1  \u0026lt;div id=\u0026#34;disqus_thread\u0026#34;\u0026gt;\u0026lt;/div\u0026gt;   在中间加入你的来必力代码，加好以后就下面这样：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23  \u0026lt;div id=\u0026#34;disqus_thread\u0026#34;\u0026gt; \u0026lt;!-- 来必力City版安装代码,隐藏广告id --\u0026gt; \u0026lt;style\u0026gt; #taboola-livere { display: none;} \u0026lt;/style\u0026gt; \u0026lt;div id=\u0026#34;lv-container\u0026#34; data-id=\u0026#34;city\u0026#34; data-uid=\u0026#34;M*****************==\u0026#34;\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34;\u0026gt; (function(d, s) { var j, e = d.getElementsByTagName(s)[0]; if (typeof LivereTower === \u0026#39;function\u0026#39;) { return; } j = d.createElement(s); j.src = \u0026#39;https://cdn-city.livere.com/js/embed.dist.js\u0026#39;; j.async = true; e.parentNode.insertBefore(j, e); })(document, \u0026#39;script\u0026#39;); \u0026lt;/script\u0026gt; \u0026lt;noscript\u0026gt; 为正常使用来必力评论功能请激活JavaScript\u0026lt;/noscript\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;!-- City版安装代码已完成 --\u0026gt; \u0026lt;/div\u0026gt;   删除原disqus代码：\n1 2 3 4 5 6 7 8 9  \u0026lt;script\u0026gt; (function() { var d = document, s = d.createElement(\u0026#39;script\u0026#39;); s.src = \u0026#39;//{{ site.discus_identifier }}.disqus.com/embed.js\u0026#39;; s.setAttribute(\u0026#39;data-timestamp\u0026#39;, +new Date()); (d.head || d.body).appendChild(s); })(); \u0026lt;/script\u0026gt; \u0026lt;noscript\u0026gt;Please enable JavaScript to view the comments.\u0026lt;/noscript\u0026gt;   保存。\n修改中文字数统计 这个模板英文统计没问题，中文么就不行了，参照The filter number_of_words can\u0026rsquo;t parse Chinese correctly #1921 \n打开_includes/post-meta.html，找到\n1  {% assign words = document.content | strip_html | number_of_words %}   修改为\n1  {% assign words = document.content | strip_html | size %}   就可以正常统计中文字数了。阅读时间就没改了，好像有篇文章说英文跟中文阅读速度差不多的，恩，主要是懒。\n修改摘要显示 模板本来是按100个单词截取摘要的，本来以为我中文字数改了也会正常了，结果存档页还是整篇显示，搜了一下，Jekyll 使用记录这里找到办法了，原来官方文档就有写的。\n在_config.yml里面添加一行\n1  excerpt_separator:\u0026#39;\u0026lt;!--more--\u0026gt;\u0026#39;  然后打开_pages/archive.html，找到\n1  {{ post.content | markdownify | strip_newlines | truncatewords: 100 }}   改为\n1  {{ post.excerpt }}   这样设置有点烦的地方就是每篇文章里都要在摘要后面加上\u0026lt;!--more--\u0026gt;，多了自定义的快乐，少了自动的简便。不过没事，复制粘贴一下也不会很辛苦。其实这里我弄了好久，还以为自己代码弄错了，结果一个呢是config里面定义分割符的时候少了引号，还一个最坑的就是我一直在改_layouts/post.html，all post页面其实是archive.html。\n唉，思维惯势不可取，还一点是要细心，其实目录结构里看一下就知道了，就是每次翻倒都是扫一眼就过，该。\nPS:发布的时候一直出错，显示\u0026rsquo;if' tag was never closed，按GitHub 博客\u0026ndash; Jekyll\u0026ndash;代码高亮，Liquid 转义字符的方法加了raw终于解决了，还一个就是tag里我写了个size。。。两个问题我花了好几个小时才解决。\n","date":"2021-12-29T09:42:20+08:00","permalink":"https://www.darkbluesoul.cc/p/adam-blog-2.0%E4%B8%BB%E9%A2%98%E4%BF%AE%E6%94%B9/","title":"Adam Blog 2.0主题修改"},{"content":"建好博客第一件事情就是改logo，毕竟不好顶着别人的名字啊，一开始想着简单弄个好了。\nSVG不知道用什么打开，搜了下是AI，再搜Linux替代AI的软件，就找到inkscape了。之前只用过PS，好在是中文的？想不起来是不是中文的了，就按着原logo.svg的尺寸新建了个，文本输入DARKBLUESOUL，改了个字体，保存替换了原来的文件。jekyll serve，本地看看很满意，就push上去了。\n换台电脑看就又不一样了，字体没了，变成黑体的样子了，想着也无所谓，先这样吧。\n过了几天无聊了，就仿着原来的logo也弄了个圈圈，里面么就要把D、B、S都要包含进去，就想了上面这样的图。字也分成两排，不会配色，就把原来的logo打开吸点颜色，弄好了看看也还行。结果同事过来一看，“哟，这是SB嘛，可以可以”。不管他，我还是放上去了，又是没字体，字跟图都挤一块儿了，那我有点受不了了。想着是不是删格化图层可以试试，可是inkscape没有这功能，就以为AI会有，又在另外电脑下了个AI，可惜也没找到删除化功能。\n既然下了AI，那就在AI上弄呗。配合以前做的favicon的黑红做了下面这张，其实图片本来还挺满意的，只是存好再看还是因为字体丢失就很难看。无聊点了个右键，发现了新大陆，可以把对象导出的哦，就把字啊图啊，全部导出PNG，然后再插回到SVG里，字的样子是不变了，只是，好像加载很慢啊？\n搜了下字体丢失，说是要转路径，忘了哪篇了，本来想着所有搜索的都要存着，只是找东西的时候就忘了。\nAI应该是叫建立轮廓，终于可以了，字体都在了，本地看看也还行，只是等我push到github多看了几次，就又觉得难看了。\n两台电脑我用坚果云同步的，已经拷贝到img目录我就懒得再弄回去了，直接用inkscape编辑了，已经弄的很烦了，还是用了最早的字体全名，想着找轮廓，结果没找到，再仔细一看，菜单里本来就有转换路径，很方便的，只是原来我不知道这个干嘛用的。\n所以现在我又回到最早的版本了，现在是路径了，不会再丢字体了。也好的，兜来兜去，知道的又多了点，不是么？\n","date":"2021-12-27T19:32:10+08:00","permalink":"https://www.darkbluesoul.cc/p/inkscape%E4%BF%AE%E6%94%B9logo/","title":"inkscape修改logo"},{"content":"jekyll对新手略难 Linux Mint安装jekyll，有点忘了，装ruby就折腾了好久，各种出错，应该就是Linux命令不熟的原因，最后算是弄好了，git push都正常，就是觉得主题不好看，下个主题么，又是缺东少西的，就懒得弄了。后面无聊搜了下Linux发行版的排名，下了个排第一的MXLinux，重装系统，jekyll啥的就都没了。\nGridea简单，模板少 懒得再装jekyll，试了下grdiea，很方便，可惜模板太少了。像我这种连CSS都懒得改的，那就最好是拿来就能用的。然后看网上说什么现在jekyll都转hugo了，就又想着用hugo。\nhugo很方便 尤其是我选的acdemic主题，wowchemy系列，支持netlify一键部署到github，而且repo名随意，建好了自定义个netlify二级域名就可以访问了。 其实我建了两个，另一个是hogo-blog什么的，就是几个喜欢的主题都是头像在最上面的，不喜欢，还一点就是要本地生成public再部署，也不喜欢。 舍弃wowchemy，干脆自己部署，主题找了个even，还不错，就是hugo serve后本地访问没问题，push到github就无法访问，最后才想起自己部署错了，把整个站点push上去了，当然没法访问。\n再用回jekyll就觉得简单了 无聊看了下jekyll的主题，就第一个Adam Blog ver2.0，手机访问很好看啊，又开始折腾jekyll。 MXlinux安装ruby： sudo apt-get install ruby 结果出错，说要单独安装dev，网上查了下，应该是要装完整包，再用 sudo apt-get install ruby-full 就解决了。 gem install jekyll 安装到最后说没权限，要求密码，输入root用户密码就可以了。后面再装就直接 sudo gem install jekyll 就没有这个问题了。 jekyll主题是下的zip，解压以后修改config，再 bundle install 再git全套就好了， git push -u origin master出错，被拒绝，搜了下用 git push -f 解决了。 现在犯愁的是SVG没弄过，这几天还要再下个AI做一个。 总之，先这样吧，域名也绑了，这两天在纠结要不要阿里云买个便宜点的域名做个备案，只是便宜的后缀都好长，三位的两个我前面都买了又不想用在博客上。算了，贵点就贵点吧，看今年能不能坚持写下去吧。\n2022.05.03 换hugo了。\n","date":"2021-12-17T13:32:20-06:00","permalink":"https://www.darkbluesoul.cc/p/jekyll%E4%B9%8B%E6%8A%98%E8%85%BE/","title":"jekyll之折腾"}]